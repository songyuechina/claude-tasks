# CAD任务模板（带进度汇报）

## 📋 标准任务模板

```markdown
<任务>

**任务名称**：{任务名称}

**目标**：{简要描述任务目的}

**具体要求**：
1. {要求1}
2. {要求2}
3. {要求3}

**文件路径**：
- 输入文件：{路径}
- 输出文件：{路径}

**技术要求**：
- 使用函数：{指定函数}
- 性能要求：{如果有}

**进度汇报要求**：
请每隔 {Y} 分钟汇报进度

**完成标准**：
- [ ] {标准1}
- [ ] {标准2}
- [ ] 🔴 已执行cad_zt_zero()清理所有CAD进程
- [ ] 🔔 已设置结束信号为1

</任务>

<强制规范>
🔴 任务完成前必须执行：
1. 调用cad_zt_zero()清理所有CAD进程
2. 设置可以结束对话.txt为1
</强制规范>

<任务完成汇报>
我已经检查任务完成情况，确认任务已经完成。
</任务完成汇报>
```

---

## 📊 进度汇报示例

### 示例1：简单任务（不需要汇报）

```markdown
<任务>
**任务名称**：测试单个函数
**目标**：测试draw_line函数
**预计时间**：2分钟

（不需要指定进度汇报要求）
</任务>
```

**Claude执行**：
- 直接完成任务
- 完成后汇报结果

---

### 示例2：中等任务（每3分钟汇报）

```markdown
<任务>
**任务名称**：绘制建筑平面图
**目标**：绘制包含墙、门、窗的完整平面图
**预计时间**：10分钟

**进度汇报要求**：
请每隔 3 分钟汇报进度
</任务>
```

**Claude执行**：
```
[开始] 任务开始执行

[进度] 步骤 1/4：新建文件
[状态] 正常
[耗时] 5秒

[进度] 步骤 2/4：绘制墙体
[状态] 等待CAD命令完成
[耗时] 已执行 25秒

--- 3分钟后 ---

[进度汇报] 已完成 2/4 步骤
[当前] 正在绘制门窗
[预计] 还需 5 分钟

--- 再3分钟后 ---

[进度汇报] 已完成 3/4 步骤
[当前] 正在保存文件
[预计] 还需 2 分钟

[完成] 任务完成
```

---

### 示例3：长任务（每5分钟汇报）

```markdown
<任务>
**任务名称**：批量处理100个DWG文件
**目标**：对所有文件进行格式转换
**预计时间**：20分钟

**进度汇报要求**：
请每隔 5 分钟汇报进度
</任务>
```

**Claude执行**：
```
[开始] 任务开始执行
[总数] 100个文件

[进度] 已处理 10/100 文件
[状态] 正常
[速度] 约2文件/分钟

--- 5分钟后 ---

[进度汇报] 已处理 25/100 文件
[状态] 正常
[速度] 约5文件/分钟
[预计] 还需 15 分钟

--- 再5分钟后 ---

[进度汇报] 已处理 50/100 文件
[状态] 正常
[完成度] 50%
[预计] 还需 10 分钟

--- 再5分钟后 ---

[进度汇报] 已处理 75/100 文件
[状态] 正常
[完成度] 75%
[预计] 还需 5 分钟

[完成] 任务完成
[总耗时] 18分钟
```

---

## 🔍 状态检查示例

### 场景1：正常执行中

**用户发送**：
```
状态检查：是否遇到问题？
```

**Claude回应**：
```
[状态] 一切正常
[当前] 正在执行：绘制天正墙
[进度] 步骤 3/5
[已完成] 新建文件、绘制多段线、绘制矩形
[进行中] 绘制天正墙（已执行30秒）
[待执行] 绘制圆、保存文件
[预计] 还需 2 分钟
```

---

### 场景2：等待CAD命令

**用户发送**：
```
状态检查：是否遇到问题？
```

**Claude回应**：
```
[状态] 一切正常
[当前] 等待CAD命令完成
[操作] draw_tarch_wall() 正在执行
[耗时] 已等待 45 秒
[说明] 天正墙绘制通常需要40-60秒
[预计] 还需 15 秒
```

---

### 场景3：遇到问题

**用户发送**：
```
状态检查：是否遇到问题？
```

**Claude回应**：
```
[状态] 遇到问题
[问题] CAD命令超时（已等待90秒）
[位置] draw_tarch_wall() 函数
[尝试] 已尝试重试1次，仍然超时
[分析] 可能是CAD进程卡住
[建议] 需要调用cad_zt_oneb()终止进程
[需要] 是否允许终止并重新开始？
```

---

## 📝 任务描述最佳实践

### ✅ 好的任务描述

```markdown
<任务>
**任务名称**：测试墙体绘制功能
**目标**：验证draw_tarch_wall()函数在不同参数下的表现
**预计时间**：8分钟

**具体要求**：
1. 绘制3种不同宽度的墙体（200/240/300）
2. 测试不同长度（1000/3000/5000）
3. 记录每次执行时间

**进度汇报要求**：
请每隔 3 分钟汇报进度

**完成标准**：
- [ ] 所有9种组合都已测试
- [ ] 记录了执行时间
- [ ] 生成了测试报告
- [ ] 🔴 已执行cad_zt_zero()
- [ ] 🔔 已设置结束信号为1
</任务>
```

**为什么好**：
- ✅ 明确的目标和要求
- ✅ 指定了进度汇报频率
- ✅ 清晰的完成标准
- ✅ 包含强制规范提醒

---

### ❌ 不好的任务描述

```markdown
<任务>
测试墙体功能
</任务>
```

**为什么不好**：
- ❌ 目标不明确
- ❌ 没有具体要求
- ❌ 没有进度汇报要求
- ❌ 没有完成标准
- ❌ 缺少强制规范提醒

---

## 🎯 快速参考

### 何时需要进度汇报？

| 预计时间 | 是否需要 | 汇报频率 |
|---------|---------|---------|
| < 5分钟 | ❌ 不需要 | - |
| 5-15分钟 | ✅ 需要 | 每3分钟 |
| 15-30分钟 | ✅ 需要 | 每5分钟 |
| > 30分钟 | ✅ 必须 | 每2分钟 |

### 状态检查何时使用？

- ⏰ 超过预期时间没有回应
- 🤔 不确定任务是否在执行
- ⚠️ 怀疑任务卡住
- 📊 想了解当前进度

---

**使用此模板可以确保任务描述清晰，进度可追踪！**
